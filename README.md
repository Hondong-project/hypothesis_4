가설 4. 이미지(image, image_count)가 적거나, 텍스트 내용(description) 과 불일치할 경우 허위 매물일 가능성이 높다.

-> 텍스트 내용과 불일치의 경우 어떤 텍스트를 이미지와 매치해야 하는지 몰라 이미지에 변형이 일어났는지 탐지하기로 함

여러장의 매물 이미지를 불러와 특징을 추출해 그 패턴이 정상과 얼마나 다른지 image_anomaly_score로 새 컬럼 생성, image_anomaly_score는 0~1로 정규화

정생 패턴으로부터 벗어난 정도를 계산하는 이상치 탐지 알고리즘 Isolation Forest 사용

📌 Image Anomaly Detection (이미지 기반 매물 의심도 분석)

이 모듈은 매물 이미지들이 정상적인지 / 수상한 변형이 있는지를 분석하여
image_anomaly_score (0~1)을 계산합니다.

0은 정상, 1은 매우 의심스럽다는 의미입니다.

✔️ 탐지 가능한 이상 패턴

과도한 확대/축소

비정상적인 비율(가로/세로 왜곡)

과한 보정으로 인한 색감 붕괴

업스케일링·다중 압축 흔적

구조적으로 어색한 패턴

※ 워터마크/블러는 정상 패턴으로 처리합니다.

✔️ 동작 방식

각 매물의 이미지 URL들을 | 기준으로 모두 분리

이미지 다운로드 후 256×256으로 변환

ResNet50 모델로 이미지 특징(2048차원 벡터) 추출

여러 이미지가 있을 경우 특징들을 평균하여 매물 대표 특징 생성

IsolationForest 알고리즘으로 전체 특징 분포 학습

정상 패턴에서 벗어난 정도를 기반으로 anomaly score 계산

0~1로 정규화된 image_anomaly_score 생성

✔️ 스코어 해석

점수	의미

0.0 ~ 0.3	정상

0.3 ~ 0.6	약간 의심됨

0.6 ~ 0.8	꽤 의심됨

0.8 ~ 1.0	매우 의심됨

1.0	이미지 없음 → 가장 의심
